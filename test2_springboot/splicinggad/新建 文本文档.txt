<template>

  <div>
    <nav>
      <!--    <router-link to="/">Home</router-link> |-->
      <!--    <router-link to="/about">About</router-link>-->


      <a-layout>
        <a-layout>
          <a-layout-sider width="200" style="background: #fff">
            <a-menu
                mode="inline"
                v-model:selectedKeys="selectedKeys2"
                v-model:openKeys="openKeys"
                :style="{ height: '100%', borderRight: 0}"
            >
              <a-sub-menu key="sub1">
                <template #title>
                <span style="color:red;">
                  <user-outlined />
                  Goat
                </span>
                </template>
                <a-menu-item key="1" @click="changeGPBMC">PBMC</a-menu-item>
                <a-menu-item key="2" @click="changeGLung">Lung</a-menu-item>
                <a-menu-item key="3" @click="changeGKindey">Kindey</a-menu-item>
                <a-menu-item key="4" @click="changeGLiver">Liver</a-menu-item>
              </a-sub-menu>
              <a-sub-menu key="sub2">
                <template #title>
                <span>
                  <laptop-outlined />
                  Pig
                </span>
                </template>
                <a-menu-item key="5" @click="changePPBMC">PBMC</a-menu-item>
                <a-menu-item key="6" @click="changePLung">Lung</a-menu-item>
                <a-menu-item key="7" @click="changePKindey">Kindey</a-menu-item>
                <a-menu-item key="8" @click="changePLiver">Liver</a-menu-item>
              </a-sub-menu>
              <a-sub-menu key="sub3">
                <template #title>
                <span>
                  <notification-outlined />
                  Bos taurus
                </span>
                </template>
                <a-menu-item key="9" @click="changeBPBMC">PBMC</a-menu-item>
                <a-menu-item key="10" @click="changeBLung">Lung</a-menu-item>
                <a-menu-item key="11" @click="changeBKindey">Kindey</a-menu-item>
                <a-menu-item key="12" @click="changeBLiver">Liver</a-menu-item>
              </a-sub-menu>

              <a-menu-item key="sub4">
                <user-outlined />
                <span class="nav-text" @click="changeGenePic">GenePic</span>
              </a-menu-item>
            </a-menu>
          </a-layout-sider>
          <a-layout style="padding: 0 24px 24px">
            <a-breadcrumb style="margin: 16px 0">
            </a-breadcrumb>
            <a-layout-content
                :style="{ background: '#fff', padding: '24px', margin: 0, minHeight: '280px' }"
            >
              Content
              <div>
                <router-view/>
              </div>
              <div v-if="showcontent">
                <img :src="imgdata" style="width: 400px;height: 400px">
              </div>
            </a-layout-content>
          </a-layout>
        </a-layout>
      </a-layout>
    </nav>

  </div>

  <!--  <router-view/>-->
</template>

<script>
import axios from "axios";
export default {
  name: "CellGene",
  data(){
    return{
      imgdata:'',
      showcontent:false,
      dataSource: [],
      pagination: {//分页相关模型数据
        currentPage: 1,//当前页码
        pageSize:100000,//每页显示的记录数
        total:0,//总记录数
        species: "",
        tissues: "",
        celltype: "",
        cellmaker:"",

      },

    }
  },
  methods:{
    getall() {
      var param = "?species="+this.pagination.species;
      param += "&tissues="+this.pagination.tissues;
      param += "&celltype="+this.pagination.celltype;
      param += "&cellmaker="+this.pagination.cellmaker;

      axios.defaults.baseURL = 'http://www.diseaselinks.com:8080';
      axios.get("/gene/"+this.pagination.currentPage+"/"+this.pagination.pageSize+param).then((res)=>{
        this.dataSource =  Array.from(res.data.data.records);
      })
    },
    restart() {
      this.pagination.species='';
      this.pagination.tissues='';
      this.pagination.celltype='';
      this.pagination.cellmaker='';


      var param = "?species="+this.pagination.species;
      param += "&tissues="+this.pagination.tissues;
      param += "&celltype="+this.pagination.celltype;
      param += "&cellmaker="+this.pagination.cellmaker;

      axios.defaults.baseURL = 'http://www.diseaselinks.com:8080';

      axios.get("/gene/"+this.pagination.currentPage+"/"+this.pagination.pageSize+param).then((res)=>{
        this.dataSource =  Array.from(res.data.data.records);
      })
    },
    getdata() {
      $.ajax({
        'url': 'http://www.diseaselinks.com:8080/Tissue/upload3',
        'type': 'get',
        success: data => {
          console.log(data.newname);
          this.imgdata=data.newname;
        }
      })
    },
    changeGPBMC(){
      //this.showcontent=true;
      this.$router.push({
        path:'GPBMC',
      })
    },
    changeGLung(){
      //this.showcontent=true;
      this.$router.push({
        path:'GLung',
      })
    },
    changeGKindey(){
      this.$router.push({
        path:'GKindey',
      })
    },
    changeGLiver(){
      this.$router.push({
        path:'GLiver',
      })
    },
    changePPBMC(){
      //this.showcontent=true;
      this.$router.push({
        path:'PPBMC',
      })
    },
    changePLung(){
      //this.showcontent=true;
      this.$router.push({
        path:'PLung',
      })
    },
    changePKindey(){
      this.$router.push({
        path:'PKindey',
      })
    },
    changePLiver(){
      this.$router.push({
        path:'PLiver',
      })
    },
    changeBPBMC(){
      //this.showcontent=true;
      this.$router.push({
        path:'BPBMC',
      })
    },
    changeBLung(){
      //this.showcontent=true;
      this.$router.push({
        path:'BLung',
      })
    },
    changeBKindey(){
      this.$router.push({
        path:'BKindey',
      })
    },
    changeBLiver(){
      this.$router.push({
        path:'BLiver',
      })
    },
    changeGenePic(){
      this.$router.push({
        path:'GenePic',
      })
    },
  },
  mounted() {
    this.getdata();
    this.getall();
  }
}
</script>

<style scoped>

</style>